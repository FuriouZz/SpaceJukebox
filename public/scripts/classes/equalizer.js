var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

SPACE.Equalizer = (function(_super) {
  __extends(Equalizer, _super);

  Equalizer.prototype._point = null;

  Equalizer.prototype._values = null;

  Equalizer.prototype._oldValues = null;

  Equalizer.prototype._newValues = null;

  Equalizer.prototype._time = 1;

  Equalizer.prototype.maxLength = 0;

  Equalizer.prototype.minLength = 0;

  Equalizer.prototype.radius = 0;

  Equalizer.prototype.interpolationTime = 0;

  function Equalizer(point, opts) {
    var defaults;
    if (opts == null) {
      opts = {};
    }
    this.mute = __bind(this.mute, this);
    this.random = __bind(this.random, this);
    Equalizer.__super__.constructor.apply(this, arguments);
    defaults = {
      maxLength: 200,
      minLength: 50,
      radius: 500,
      interpolationTime: .15
    };
    opts = HELPERS.merge(defaults, opts);
    this.minLength = opts.minLength;
    this.maxLength = opts.maxLength;
    this.radius = opts.radius;
    this.interpolationTime = opts.interpolationTime;
    this._point = point;
    this._values = [];
    this._oldValues = [];
    this._newValues = [];
  }

  Equalizer.prototype.setNewValues = function(values) {
    var length, newValues, value, _i, _len;
    newValues = [];
    for (_i = 0, _len = values.length; _i < _len; _i++) {
      value = values[_i];
      length = this.minLength + parseFloat(value) * (this.maxLength - this.minLength);
      newValues.push(length);
    }
    this._newValues = newValues;
    return this.resetTime();
  };

  Equalizer.prototype.random = function() {
    var i, rands, _i;
    rands = [];
    for (i = _i = 0; _i <= 255; i = ++_i) {
      rands[i] = Math.random();
    }
    return this.setNewValues(rands);
  };

  Equalizer.prototype.mute = function() {
    var i, mute, _i;
    mute = [];
    for (i = _i = 0; _i <= 255; i = ++_i) {
      mute[i] = 0;
    }
    return this.setNewValues(mute);
  };

  Equalizer.prototype.update = function(delta) {
    var diff, i, t, _i, _ref, _results;
    this._time += delta;
    t = this._time / this.interpolationTime;
    if (t > 1) {
      return;
    }
    _results = [];
    for (i = _i = 0, _ref = this._newValues.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
      diff = this._oldValues[i] - this._newValues[i];
      _results.push(this._values[i] = this._oldValues[i] - t * diff);
    }
    return _results;
  };

  Equalizer.prototype.resetTime = function() {
    var i, _i, _ref, _ref1, _results;
    this._time = 0;
    this._oldValues = this._values;
    if (this._newValues.length > this._oldValues.length) {
      _results = [];
      for (i = _i = _ref = this._oldValues.length, _ref1 = this._newValues.length - 1; _ref <= _ref1 ? _i <= _ref1 : _i >= _ref1; i = _ref <= _ref1 ? ++_i : --_i) {
        _results.push(this._oldValues[i] = 0);
      }
      return _results;
    }
  };

  Equalizer.prototype.calculateLinePoint = function(angle, length) {
    var x, y;
    x = this._point.x + Math.cos(angle) * length;
    y = this._point.y + Math.sin(angle) * length;
    return new PIXI.Point(x, y);
  };

  Equalizer.prototype.draw = function() {
    var angle, from, i, length, to, _i, _ref, _results;
    this.clear();
    this.lineStyle(2, 0xFFFFFF, 1);
    _results = [];
    for (i = _i = 0, _ref = this._values.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
      angle = PIXI.PI_2 * i / this._values.length;
      angle += Math.PI * .5;
      length = this._values[i];
      from = this.calculateLinePoint(angle, this.radius - length * .5);
      to = this.calculateLinePoint(angle, this.radius + length * .5);
      _results.push(this.drawline(from.x, from.y, to.x, to.y));
    }
    return _results;
  };

  Equalizer.prototype.drawline = function(fromX, fromY, toX, toY) {
    this.moveTo(fromX, fromY);
    return this.lineTo(toX, toY);
  };

  return Equalizer;

})(PIXI.Graphics);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsYXNzZXMvZXF1YWxpemVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBOztpU0FBQTs7QUFBQSxLQUFXLENBQUM7QUFFViw4QkFBQSxDQUFBOztBQUFBLHNCQUFBLE1BQUEsR0FBWSxJQUFaLENBQUE7O0FBQUEsc0JBRUEsT0FBQSxHQUFZLElBRlosQ0FBQTs7QUFBQSxzQkFHQSxVQUFBLEdBQVksSUFIWixDQUFBOztBQUFBLHNCQUlBLFVBQUEsR0FBWSxJQUpaLENBQUE7O0FBQUEsc0JBTUEsS0FBQSxHQUFPLENBTlAsQ0FBQTs7QUFBQSxzQkFTQSxTQUFBLEdBQW1CLENBVG5CLENBQUE7O0FBQUEsc0JBVUEsU0FBQSxHQUFtQixDQVZuQixDQUFBOztBQUFBLHNCQVdBLE1BQUEsR0FBbUIsQ0FYbkIsQ0FBQTs7QUFBQSxzQkFZQSxpQkFBQSxHQUFtQixDQVpuQixDQUFBOztBQWNhLEVBQUEsbUJBQUMsS0FBRCxFQUFRLElBQVIsR0FBQTtBQUNYLFFBQUEsUUFBQTs7TUFEbUIsT0FBSztLQUN4QjtBQUFBLHVDQUFBLENBQUE7QUFBQSwyQ0FBQSxDQUFBO0FBQUEsSUFBQSw0Q0FBQSxTQUFBLENBQUEsQ0FBQTtBQUFBLElBR0EsUUFBQSxHQUNFO0FBQUEsTUFBQSxTQUFBLEVBQW1CLEdBQW5CO0FBQUEsTUFDQSxTQUFBLEVBQW1CLEVBRG5CO0FBQUEsTUFFQSxNQUFBLEVBQW1CLEdBRm5CO0FBQUEsTUFHQSxpQkFBQSxFQUFtQixHQUhuQjtLQUpGLENBQUE7QUFBQSxJQVNBLElBQUEsR0FBcUIsT0FBTyxDQUFDLEtBQVIsQ0FBYyxRQUFkLEVBQXdCLElBQXhCLENBVHJCLENBQUE7QUFBQSxJQVVBLElBQUMsQ0FBQSxTQUFELEdBQXFCLElBQUksQ0FBQyxTQVYxQixDQUFBO0FBQUEsSUFXQSxJQUFDLENBQUEsU0FBRCxHQUFxQixJQUFJLENBQUMsU0FYMUIsQ0FBQTtBQUFBLElBWUEsSUFBQyxDQUFBLE1BQUQsR0FBcUIsSUFB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TyxFQUExQyxDQU5QLENBQUE7QUFBQSxvQkFRQSxJQUFDLENBQUEsUUFBRCxDQUFVLElBQUksQ0FBQyxDQUFmLEVBQWtCLElBQUksQ0FBQyxDQUF2QixFQUEwQixFQUFFLENBQUMsQ0FBN0IsRUFBZ0MsRUFBRSxDQUFDLENBQW5DLEVBUkEsQ0FERjtBQUFBO29CQUpJO0VBQUEsQ0EvRU4sQ0FBQTs7QUFBQSxzQkE4RkEsUUFBQSxHQUFVLFNBQUMsS0FBRCxFQUFRLEtBQVIsRUFBZSxHQUFmLEVBQW9CLEdBQXBCLEdBQUE7QUFDUixJQUFBLElBQUMsQ0FBQSxNQUFELENBQVEsS0FBUixFQUFlLEtBQWYsQ0FBQSxDQUFBO1dBQ0EsSUFBQyxDQUFBLE1BQUQsQ0FBUSxHQUFSLEVBQWEsR0FBYixFQUZRO0VBQUEsQ0E5RlYsQ0FBQTs7bUJBQUE7O0dBRjRCLElBQUksQ0FBQyxTQUFuQyxDQUFBIiwiZmlsZSI6ImNsYXNzZXMvZXF1YWxpemVyLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgU1BBQ0UuRXF1YWxpemVyIGV4dGVuZHMgUElYSS5HcmFwaGljc1xuXG4gIF9wb2ludDogICAgIG51bGxcblxuICBfdmFsdWVzOiAgICBudWxsXG4gIF9vbGRWYWx1ZXM6IG51bGxcbiAgX25ld1ZhbHVlczogbnVsbFxuXG4gIF90aW1lOiAxXG5cbiAgIyBQYXJhbWV0ZXJzXG4gIG1heExlbmd0aDogICAgICAgICAwXG4gIG1pbkxlbmd0aDogICAgICAgICAwXG4gIHJhZGl1czogICAgICAgICAgICAwXG4gIGludGVycG9sYXRpb25UaW1lOiAwXG5cbiAgY29uc3RydWN0b3I6IChwb2ludCwgb3B0cz17fSktPlxuICAgIHN1cGVyXG5cbiAgICAjIFNldCBwYXJhbWV0ZXJzXG4gICAgZGVmYXVsdHMgPVxuICAgICAgbWF4TGVuZ3RoOiAgICAgICAgIDIwMFxuICAgICAgbWluTGVuZ3RoOiAgICAgICAgIDUwXG4gICAgICByYWRpdXM6ICAgICAgICAgICAgNTAwXG4gICAgICBpbnRlcnBvbGF0aW9uVGltZTogLjE1XG5cbiAgICBvcHRzICAgICAgICAgICAgICAgPSBIRUxQRVJTLm1lcmdlKGRlZmF1bHRzLCBvcHRzKVxuICAgIEBtaW5MZW5ndGggICAgICAgICA9IG9wdHMubWluTGVuZ3RoXG4gICAgQG1heExlbmd0aCAgICAgICAgID0gb3B0cy5tYXhMZW5ndGhcbiAgICBAcmFkaXVzICAgICAgICAgICAgPSBvcHRzLnJhZGl1c1xuICAgIEBpbnRlcnBvbGF0aW9uVGltZSA9IG9wdHMuaW50ZXJwb2xhdGlvblRpbWVcblxuICAgICMgU2V0IHZhbHVlc1xuICAgIEBfcG9pbnQgICAgID0gcG9pbnRcbiAgICBAX3ZhbHVlcyAgICA9IFtdXG4gICAgQF9vbGRWYWx1ZXMgPSBbXVxuICAgIEBfbmV3VmFsdWVzID0gW11cblxuICBzZXROZXdWYWx1ZXM6ICh2YWx1ZXMpLT5cbiAgICBuZXdWYWx1ZXMgPSBbXVxuICAgIGZvciB2YWx1ZSBpbiB2YWx1ZXNcbiAgICAgIGxlbmd0aCA9IEBtaW5MZW5ndGggKyBwYXJzZUZsb2F0KHZhbHVlKSooQG1heExlbmd0aCAtIEBtaW5MZW5ndGgpXG4gICAgICBuZXdWYWx1ZXMucHVzaChsZW5ndGgpXG5cbiAgICBAX25ld1ZhbHVlcyA9IG5ld1ZhbHVlc1xuICAgIEByZXNldFRpbWUoKVxuXG4gIHJhbmRvbTogPT5cbiAgICByYW5kcyA9IFtdXG4gICAgZm9yIGkgaW4gWzAuLjI1NV1cbiAgICAgIHJhbmRzW2ldID0gTWF0aC5yYW5kb20oKVxuICAgIEBzZXROZXdWYWx1ZXMocmFuZHMpXG5cbiAgbXV0ZTogPT5cbiAgICBtdXRlID0gW11cbiAgICBmb3IgaSBpbiBbMC4uMjU1XVxuICAgICAgbXV0ZVtpXSA9IDBcbiAgICBAc2V0TmV3VmFsdWVzKG11dGUpXG5cbiAgdXBkYXRlOiAoZGVsdGEpLT5cbiAgICBAX3RpbWUgKz0gZGVsdGFcbiAgICB0ID0gQF90aW1lIC8gQGludGVycG9sYXRpb25UaW1lXG4gICAgcmV0dXJuIGlmIHQgPiAxXG5cbiAgICBmb3IgaSBpbiBbMC4uKEBfbmV3VmFsdWVzLmxlbmd0aC0xKV1cbiAgICAgIGRpZmYgICAgICAgID0gQF9vbGRWYWx1ZXNbaV0gLSBAX25ld1ZhbHVlc1tpXVxuICAgICAgQF92YWx1ZXNbaV0gPSBAX29sZFZhbHVlc1tpXSAtIHQgKiBkaWZmXG5cbiAgcmVzZXRUaW1lOiAtPlxuICAgIEBfdGltZSA9IDBcbiAgICBAX29sZFZhbHVlcyA9IEBfdmFsdWVzXG5cbiAgICBpZiBAX25ld1ZhbHVlcy5sZW5ndGggPiBAX29sZFZhbHVlcy5sZW5ndGhcbiAgICAgIGZvciBpIGluIFsoQF9vbGRWYWx1ZXMubGVuZ3RoKS4uKEBfbmV3VmFsdWVzLmxlbmd0aC0xKV1cbiAgICAgICAgQF9vbGRWYWx1ZXNbaV0gPSAwXG5cbiAgY2FsY3VsYXRlTGluZVBvaW50OiAoYW5nbGUsIGxlbmd0aCktPlxuICAgIHggPSBAX3BvaW50LnggKyBNYXRoLmNvcyhhbmdsZSkgKiBsZW5ndGhcbiAgICB5ID0gQF9wb2ludC55ICsgTWF0aC5zaW4oYW5nbGUpICogbGVuZ3RoXG4gICAgcmV0dXJuIG5ldyBQSVhJLlBvaW50KHgsIHkpXG5cbiAgZHJhdzogLT5cbiAgICBAY2xlYXIoKVxuICAgIEBsaW5lU3R5bGUoMiwgMHhGRkZGRkYsIDEpXG5cbiAgICBmb3IgaSBpbiBbMC4uKEBfdmFsdWVzLmxlbmd0aC0xKV1cbiAgICAgIGFuZ2xlICA9IFBJWEkuUElfMiAqIGkgLyAoQF92YWx1ZXMubGVuZ3RoKVxuICAgICAgYW5nbGUgICs9IE1hdGguUEkqLjVcblxuICAgICAgbGVuZ3RoID0gQF92YWx1ZXNbaV1cblxuICAgICAgZnJvbSA9IEBjYWxjdWxhdGVMaW5lUG9pbnQoYW5nbGUsIEByYWRpdXMtbGVuZ3RoKi41KVxuICAgICAgdG8gICA9IEBjYWxjdWxhdGVMaW5lUG9pbnQoYW5nbGUsIEByYWRpdXMrbGVuZ3RoKi41KVxuXG4gICAgICBAZHJhd2xpbmUoZnJvbS54LCBmcm9tLnksIHRvLngsIHRvLnkpXG5cbiAgZHJhd2xpbmU6IChmcm9tWCwgZnJvbVksIHRvWCwgdG9ZKS0+XG4gICAgQG1vdmVUbyhmcm9tWCwgZnJvbVkpXG4gICAgQGxpbmVUbyh0b1gsIHRvWSlcbiJdfQ==